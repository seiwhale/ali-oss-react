var dist=function(e,t,r,n,o,c,a,u,s,i,l,p,f,y){"use strict";function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function g(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}r=r&&r.hasOwnProperty("default")?r.default:r,o=o&&o.hasOwnProperty("default")?o.default:o,a=a&&a.hasOwnProperty("default")?a.default:a,s=s&&s.hasOwnProperty("default")?s.default:s;var w=require("ali-oss"),m=function(e){function t(){var e,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,c=new Array(o),a=0;a<o;a++)c[a]=arguments[a];return g(n,(r=n=g(this,(e=h(t)).call.apply(e,[this].concat(c))),n.DEFAULT_PROPS={action:"/",multiple:!1,beforeUpload:function(e,t){return new Promise((function(r,o){var c,a,u,s,i;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:c=n.props,a=c.name,u=c.beforeUpload,s=a||e.name,u?(i=u(e,t))&&i.then&&(n.upload(s,e),r()):(n.upload(s,e),r()),o();case 4:case"end":return l.stop()}}))}))}},n.upload=function(e,t){var r,o,c,a,u;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return r=n.props,o=r.onSuccess,c=r.onError,i.prev=1,i.next=4,regeneratorRuntime.awrap(n.client.put(e,t));case 4:return a=i.sent,console.log("put success: %j",a),s.success("上传成功"),i.next=9,regeneratorRuntime.awrap(n.client.get(e));case 9:u=i.sent,console.log("get success: %j",u),o&&o(a,u),i.next=19;break;case 14:i.prev=14,i.t0=i.catch(1),console.error("error: %j",i.t0),s.error("上传失败"),c&&c(i.t0);case 19:case"end":return i.stop()}}),null,null,[[1,14]])},r))}var n,c,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),n=t,(c=[{key:"componentDidMount",value:function(){var e=this.props,t=e.region,r=e.accessKeyId,n=e.accessKeySecret,o=e.bucket;this.client=new w({region:t,accessKeyId:r,accessKeySecret:n,bucket:o})}},{key:"render",value:function(){var e=this.props,t=(e.region,e.accessKeyId,e.accessKeySecret,e.bucket,v(e,["region","accessKeyId","accessKeySecret","bucket"]));return y.createElement(r,d({},this.DEFAULT_PROPS,t),y.createElement(o,null,y.createElement(a,{type:"upload"}),"上传"))}}])&&b(n.prototype,c),u&&b(n,u),t}(y.Component);return e.default=m,e}({},0,_Upload,0,_Button,0,_Icon,0,_message,0,0,0,0,React);
